{"version":3,"sources":["./src/environments/environment.ts","./src/app/hacker-news.service.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/infinite-scroller.directive.ts","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nconst BASE_URL = 'http://node-hnapi.herokuapp.com';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class HackerNewsService {\r\n  constructor(private http: HttpClient) {}\r\n\r\n  getLatestStories(page: number = 1) {\r\n    return this.http.get(`${BASE_URL}/news?page=${page}`);\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { HackerNewsService } from './hacker-news.service';\r\nimport { tap } from 'rxjs/operators';\r\nimport { PerfectScrollbarConfigInterface } from 'ngx-perfect-scrollbar';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n})\r\nexport class AppComponent implements OnInit {\r\n  title = 'infinite-scroller-poc';\r\n\r\n  currentPage = 1;\r\n\r\n  news: Array<any> = [];\r\n\r\n  scrollCallback;\r\n\r\n  config: PerfectScrollbarConfigInterface = {};\r\n\r\n  constructor(private service: HackerNewsService) {\r\n    this.scrollCallback = this.getStories.bind(this);\r\n  }\r\n\r\n  getStories() {\r\n    return this.service\r\n      .getLatestStories(this.currentPage)\r\n      .pipe(tap(this.processData.bind(this)));\r\n  }\r\n\r\n  private processData(news: any[]) {\r\n    console.log('here is am 2', news);\r\n\r\n    this.currentPage++;\r\n    this.news = this.news.concat(news);\r\n  }\r\n\r\n  async ngOnInit() {}\r\n}\r\n","<div class=\"content\">\r\n  <span>infinite-scroller-poc app is running!</span>\r\n</div>\r\n\r\n<ul id=\"infinite-scroller\"\r\n    appInfiniteScroller\r\n    scrollPerecnt=\"70\"\r\n    immediateCallback=\"true\"\r\n    [scrollCallback]=\"scrollCallback\">\r\n  <li class=\"item\"\r\n      *ngFor=\"let item of news\">{{item.title}} </li>\r\n</ul>","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { InfiniteScrollerDirective } from './infinite-scroller.directive';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\nimport { PerfectScrollbarModule } from 'ngx-perfect-scrollbar';\r\nimport { PERFECT_SCROLLBAR_CONFIG } from 'ngx-perfect-scrollbar';\r\n\r\nimport { PerfectScrollbarConfigInterface } from 'ngx-perfect-scrollbar';\r\n\r\nconst DEFAULT_PERFECT_SCROLLBAR_CONFIG: PerfectScrollbarConfigInterface = {\r\n  suppressScrollX: true,\r\n};\r\n\r\n@NgModule({\r\n  declarations: [AppComponent, InfiniteScrollerDirective],\r\n  imports: [BrowserModule, HttpClientModule, PerfectScrollbarModule],\r\n  providers: [\r\n    {\r\n      provide: PERFECT_SCROLLBAR_CONFIG,\r\n      useValue: DEFAULT_PERFECT_SCROLLBAR_CONFIG,\r\n    },\r\n  ],\r\n  bootstrap: [AppComponent],\r\n})\r\nexport class AppModule {}\r\n","import {\r\n  Directive,\r\n  Input,\r\n  ElementRef,\r\n  AfterViewInit,\r\n  OnDestroy,\r\n} from '@angular/core';\r\nimport { Observable, fromEvent, pipe, Subscription } from 'rxjs';\r\n\r\nimport { map, pairwise, filter, startWith, exhaustMap } from 'rxjs/operators';\r\n\r\ninterface ScrollPosition {\r\n  sH: number;\r\n  sT: number;\r\n  cH: number;\r\n}\r\n\r\nconst DEFAULT_SCROLL_POSITION: ScrollPosition = {\r\n  sH: 0,\r\n  sT: 0,\r\n  cH: 0,\r\n};\r\n\r\n@Directive({\r\n  selector: '[appInfiniteScroller]',\r\n})\r\nexport class InfiniteScrollerDirective implements AfterViewInit, OnDestroy {\r\n  private scrollEvent$: Observable<MouseEvent>;\r\n\r\n  private userScrolledDown$: Observable<any>;\r\n\r\n  private requestStream$: Observable<any>;\r\n\r\n  private requestOnScroll$: Observable<any>;\r\n  requestOnScrollSubscription: Subscription;\r\n\r\n  constructor(private elm: ElementRef) {}\r\n\r\n  @Input()\r\n  scrollCallback;\r\n\r\n  @Input()\r\n  immediateCallback;\r\n\r\n  @Input()\r\n  scrollPercent = 70;\r\n\r\n  ngAfterViewInit() {\r\n    this.registerScrollEvent();\r\n\r\n    this.streamScrollEvents();\r\n\r\n    this.requestCallbackOnScroll();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.requestOnScrollSubscription) {\r\n      this.requestOnScrollSubscription.unsubscribe();\r\n      this.requestOnScrollSubscription = null;\r\n    }\r\n  }\r\n\r\n  private registerScrollEvent() {\r\n    this.scrollEvent$ = fromEvent(this.elm.nativeElement, 'scroll');\r\n  }\r\n\r\n  private streamScrollEvents() {\r\n    this.userScrolledDown$ = this.scrollEvent$.pipe(\r\n      map(\r\n        (scrollData) =>\r\n          ({\r\n            cH: (scrollData.target as HTMLElement).clientHeight,\r\n            sH: (scrollData.target as HTMLElement).scrollHeight,\r\n            sT: (scrollData.target as HTMLElement).scrollTop,\r\n          } as ScrollPosition)\r\n      ),\r\n      pairwise(),\r\n      filter(\r\n        (positions) =>\r\n          this.isUserScrollingDown(positions) &&\r\n          this.isScrollExpectedPercent(positions[1])\r\n      )\r\n    );\r\n  }\r\n\r\n  private requestCallbackOnScroll() {\r\n    this.requestOnScroll$ = this.userScrolledDown$;\r\n\r\n    if (this.immediateCallback) {\r\n      this.requestOnScroll$ = this.requestOnScroll$.pipe(\r\n        startWith([DEFAULT_SCROLL_POSITION, DEFAULT_SCROLL_POSITION])\r\n      );\r\n    }\r\n\r\n    this.requestOnScrollSubscription = this.requestOnScroll$\r\n      .pipe(exhaustMap(() => this.scrollCallback && this.scrollCallback()))\r\n      .subscribe(() => {});\r\n  }\r\n\r\n  private isUserScrollingDown = (positions) => {\r\n    return positions[0].sT < positions[1].sT;\r\n  }\r\n\r\n  private isScrollExpectedPercent = (position) => {\r\n    return (position.sT + position.cH) / position.sH > this.scrollPercent / 100;\r\n  }\r\n}\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}